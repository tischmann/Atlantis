export default function upload({url:e="/",data:n=null,progress:s=function(){},success:o=function(){},failure:t=function(){},method:a="POST"}={}){new Promise((o,t)=>{const r=new XMLHttpRequest;r.open(a.toUpperCase(),e),r.upload.addEventListener("progress",e=>{e.lengthComputable&&(e=e.loaded/e.total*100,s(e))}),r.onload=()=>{var e=JSON.parse(r.response);(200===r.status?o:(alert(e.message),t))(e)},r.onerror=()=>{t(new Error("Network error"))},r.send(n)}).then(o).catch(t)}
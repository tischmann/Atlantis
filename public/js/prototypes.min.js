Document.prototype.dialog=function({title:e="Dialog title",text:t="Dialog text",redirect:a=null,onclose:n=function(){}}){const o=document.createElement("dialog");var l=document.createElement("div"),s=document.createElement("button"),r=document.createElement("h2");r.textContent=e,r.classList.add("text-xl","font-semibold","mb-4","select-none","pr-4"),l.classList.add("overflow-auto"),l.innerHTML=t,s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /></svg>',s.classList.add("absolute","text-gray-400","hover:text-red-600","top-4","right-4","outline-none","transition","select-none"),s.addEventListener("click",()=>{if(a)return window.location.href=a;o.close(),n()},{once:!0}),o.classList.add("relative","p-8","rounded-xl","shadow","mx-4","bg-white","md:mx-auto","max-w-[90vw]","scale-0","transition-all"),o.append(r,l,s),document.body.append(o),o.showModal(),o.classList.remove("scale-0")},Document.prototype.sortable=function(o,{ondragend:t=function(){}}={}){let l;function a(e){e.preventDefault(),e.dataTransfer.dropEffect="move";var t,a,n=e.target.closest("li");n&&n!==l&&"LI"===n.nodeName&&(a=(t=e).target.getBoundingClientRect(),t={x:t.pageX-a.left,y:t.pageY-a.top},(e=>{e=e.getBoundingClientRect();return(e.bottom-e.top)/2})(e.target)<t.y?o.insertBefore(l,n.nextSibling):o.insertBefore(l,n))}function n(e){e.preventDefault(),l.classList.remove("opacity-50"),o.removeEventListener("dragover",a,!1),o.removeEventListener("dragend",n,!1),t(e)}[].slice.call(o.querySelectorAll("li")).forEach(function(e){e.draggable=!0}),o.addEventListener("dragstart",function(e){l=e.target.closest("li"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",l.textContent),o.addEventListener("dragover",a,!1),o.addEventListener("dragend",n,!1),setTimeout(function(){l.classList.add("opacity-50")},0)},!1)},Document.prototype.tags=function(e,t=5){const a={};return e.split(/[\s,]+/).forEach((e,t)=>{e=e.toLowerCase(),void 0===a[e]?a[e]=1:a[e]++}),Object.entries(a).length?Object.entries(a).sort((e,t)=>t[1]-e[1]).slice(0,t).map(e=>e[0]).join(", "):""},Document.prototype.progress=function(e=0,t=null){const a=document.createElement("div"),n=(a.classList.add("w-full","h-8","rounded-lg","bg-gray-200"),document.createElement("div"));return n.classList.add("h-8","rounded-lg","bg-sky-600","transition-all"),n.style.width=e+"%",a.append(n),t&&t.append(a),{element:a,update:e=>{n&&(n.style.width=e+"%")},destroy:()=>{a?.remove()}}},Document.prototype.upload=function(e,o,l=function(){},s="POST"){return new Promise((t,a)=>{const n=new XMLHttpRequest;n.open(s,e),n.upload.addEventListener("progress",e=>{e.lengthComputable&&(e=e.loaded/e.total*100,l(e))}),n.onload=()=>{var e=JSON.parse(n.response);(200===n.status?t:(document.dialog({text:e.message}),a))(e)},n.onerror=()=>{a(new Error("Network error"))},n.send(o)})},Document.prototype.select=function(e,{onchange:t=function(){}}={}){if(e){var a=self.crypto.randomUUID(),n=document.createElement("div"),o=(n.classList.add("relative","grow"),document.createElement("label"));o.classList.add("absolute","select-none","-top-3","left-2","mb-2","text-sm","text-gray-600","bg-white","px-1","text-ellipsis","whitespace-nowrap","overflow-hidden"),o.textContent=e.getAttribute("title"),o.style.maxWidth="-webkit-fill-available";const d=document.createElement("input"),i=(d.setAttribute("value",e.value),d.setAttribute("type","hidden"),d.setAttribute("name",e.name),d.setAttribute("required",""),document.createElement("button")),c=(i.setAttribute("type","button"),i.id="button-"+a,i.classList.add("flex","items-center","justify-start","px-3","py-2","outline-none","border-2","border-gray-200","rounded-lg","w-full","focus:border-sky-600","transition","min-h-11","z-10"),i.setAttribute("data-atlantis-select",""),i.addEventListener("click",function(e){document.querySelectorAll("[data-atlantis-select]").forEach(e=>{e!==this&&e.classList.remove("border-sky-600")}),document.querySelectorAll("[data-atlantis-options]:not(.hidden)").forEach(e=>{e!==c&&e.classList.add("hidden")}),this.classList.toggle("border-sky-600"),c.classList.toggle("hidden"),e.stopPropagation(),document.addEventListener("click",s,{once:!0})}),document.createElement("ul"));return c.id="ul-"+a,c.classList.add("absolute","select-none","mt-1","hidden","bg-white","rounded-lg","border","border-gray-200","shadow-lg","max-h-[50vh]","overflow-y-auto","z-20"),c.setAttribute("data-atlantis-options",""),e.querySelectorAll("option").forEach(e=>{c.append(l({value:e.value,label:e.textContent,level:e.dataset.level,selected:e.selected,disabled:e.disabled})),e.selected&&(i.textContent=e.textContent,d.setAttribute("value",e.value))}),n.append(o,d,i,c),e.parentElement.replaceChild(n,e),{value:()=>d.value,update:e=>{c.querySelectorAll("li").forEach(e=>{e.removeEventListener("click",r),e.remove()}),e.forEach(({value:e,label:t,level:a,selected:n,disabled:o})=>{c.append(l({value:e,label:t,level:a,selected:n,disabled:o})),n&&(i.textContent=t,d.setAttribute("value",e))})}};function l({value:e="",label:t="",level:a=0,selected:n=!1,disabled:o=!1}){var l=document.createElement("li");switch(l.classList.add("px-4","py-3","cursor-pointer","whitespace-nowrap","min-h-12","hover:bg-sky-600","hover:text-white"),n&&l.classList.add("bg-sky-600","text-white"),o&&l.classList.add("opacity-50","cursor-not-allowed"),""+a){case"1":l.classList.add("pl-8");break;case"2":l.classList.add("pl-12");break;case"3":l.classList.add("pl-16");break;case"4":l.classList.add("pl-20")}return l.dataset.value=e,l.dataset.level=a,l.innerText=t,l.addEventListener("click",r),l}function s(){document.querySelectorAll("[data-atlantis-select]").forEach(e=>{e.classList.remove("border-sky-600")}),document.querySelectorAll("[data-atlantis-options]").forEach(e=>{e.classList.add("hidden")})}function r(){d.setAttribute("value",this.dataset.value),i.textContent=this.textContent,c.querySelectorAll("li").forEach(e=>{e===this?this.classList.add("bg-sky-600","text-white"):e.classList.remove("bg-sky-600","text-white")}),t(this.dataset.value)}}};
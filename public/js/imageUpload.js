import Atlantis from"/js/atlantis.js";const atlantis=new Atlantis;document.querySelectorAll("img[data-atlantis-image-load]").forEach(n=>{const t=n.parentElement.querySelector('input[type="file"][data-atlantis-image-load]'),i=n.parentElement.querySelector('input[type="hidden"][data-atlantis-image-load]');var a=n.parentElement.querySelector("button[data-atlantis-image-load]");let o=n.dataset.token;atlantis.on(t,"change",t=>{var a,t=t.target.files[0],e=n.getAttribute("width"),l=n.getAttribute("height");t&&e&&l&&((a=new FormData).append("width",e),a.append("height",l),a.append("file",t,t.name),atlantis.fetch(n.dataset.url,{headers:{"X-Csrf-Token":o},body:a,success:t=>{i.value=t.image,n.src=t.location,o=t.token},failure:t=>{atlantis.dialog({message:t,onclose:()=>window.location.reload()}).show()}}))}),atlantis.on(n,"click",()=>{t.click()}),atlantis.on(a,"click",()=>{atlantis.attr(n,{src:n.dataset?.placeholder||"/images/placeholder.svg"}),i.value=""})});
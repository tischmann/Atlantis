Document.prototype.dialog=function({title:e="Dialog title",text:t="Dialog text",redirect:n=null,onclose:o=function(){}}){const a=document.createElement("dialog");var l=document.createElement("div"),r=document.createElement("button"),s=document.createElement("h2");s.textContent=e,s.classList.add("text-xl","font-semibold","mb-4","select-none","pr-4"),l.classList.add("overflow-auto"),l.innerHTML=t,r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /></svg>',r.classList.add("absolute","text-gray-400","hover:text-red-600","top-4","right-4","outline-none","transition","select-none"),r.addEventListener("click",()=>{if(n)return window.location.href=n;a.close(),o()},{once:!0}),a.classList.add("relative","p-8","rounded-xl","shadow","mx-4","bg-white","md:mx-auto","max-w-[90vw]"),a.append(s,l,r),document.body.append(a),a.showModal()},Document.prototype.sortable=function(a,{ondragend:t=function(){}}={}){let l;function n(e){e.preventDefault(),e.dataTransfer.dropEffect="move";var t,n,o=e.target.closest("li");o&&o!==l&&"LI"===o.nodeName&&(n=(t=e).target.getBoundingClientRect(),t={x:t.pageX-n.left,y:t.pageY-n.top},(e=>{e=e.getBoundingClientRect();return(e.bottom-e.top)/2})(e.target)<t.y?a.insertBefore(l,o.nextSibling):a.insertBefore(l,o))}function o(e){e.preventDefault(),l.classList.remove("opacity-50"),a.removeEventListener("dragover",n,!1),a.removeEventListener("dragend",o,!1),t(e)}[].slice.call(a.querySelectorAll("li")).forEach(function(e){e.draggable=!0}),a.addEventListener("dragstart",function(e){l=e.target.closest("li"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",l.textContent),a.addEventListener("dragover",n,!1),a.addEventListener("dragend",o,!1),setTimeout(function(){l.classList.add("opacity-50")},0)},!1)},Document.prototype.tags=function(e,t=5){const n={};return e.split(/[\s,]+/).forEach((e,t)=>{e=e.toLowerCase(),void 0===n[e]?n[e]=1:n[e]++}),Object.entries(n).length?Object.entries(n).sort((e,t)=>t[1]-e[1]).slice(0,t).map(e=>e[0]).join(", "):""},Document.prototype.progress=function(e=0,t=null){const n=document.createElement("div"),o=(n.classList.add("w-full","h-8","rounded-lg","bg-gray-200"),document.createElement("div"));return o.classList.add("h-8","rounded-lg","bg-sky-600","transition-all"),o.style.width=e+"%",n.append(o),t&&t.append(n),{element:n,update:e=>{o&&(o.style.width=e+"%")},destroy:()=>{n?.remove()}}},Document.prototype.upload=function(e,a,l=function(){},r="POST"){return new Promise((t,n)=>{const o=new XMLHttpRequest;o.open(r,e),o.upload.addEventListener("progress",e=>{e.lengthComputable&&(e=e.loaded/e.total*100,l(e))}),o.onload=()=>{var e=JSON.parse(o.response);(200===o.status?t:(document.dialog({text:e.message}),n))(e)},o.onerror=()=>{n(new Error("Network error"))},o.send(a)})},Document.prototype.select=function(e,{onchange:t=function(){}}={}){var n=self.crypto.randomUUID(),o=document.createElement("div"),a=(o.classList.add("relative","grow"),document.createElement("label"));a.classList.add("absolute","select-none","-top-3","left-2","mb-2","text-sm","text-gray-600","bg-white","px-1","text-ellipsis","overflow-hidden"),a.textContent=e.getAttribute("title"),a.style.maxWidth="-webkit-fill-available";const l=document.createElement("input"),r=(l.setAttribute("value",e.value),l.setAttribute("type","hidden"),l.setAttribute("name",e.name),l.setAttribute("required",""),document.createElement("button")),s=(r.setAttribute("type","button"),r.id="button-"+n,r.classList.add("flex","items-center","justify-start","px-3","py-2","outline-none","border-2","border-gray-200","rounded-lg","w-full","focus:border-sky-600","transition","min-h-11"),r.setAttribute("data-atlantis-select",""),r.addEventListener("click",function(e){document.querySelectorAll("[data-atlantis-select]").forEach(e=>{e!==this&&e.classList.remove("border-sky-600")}),document.querySelectorAll("[data-atlantis-options]:not(.hidden)").forEach(e=>{e!==s&&e.classList.add("hidden")}),this.classList.toggle("border-sky-600"),s.classList.toggle("hidden"),e.stopPropagation(),document.addEventListener("click",i,{once:!0})}),document.createElement("ul"));function d({value:e="",label:t="",level:n=0,selected:o=!1,disabled:a=!1}){var l=document.createElement("li");switch(l.classList.add("px-4","py-3","cursor-pointer","whitespace-nowrap","min-h-12","hover:bg-sky-600","hover:text-white"),o&&l.classList.add("bg-sky-600","text-white"),a&&l.classList.add("opacity-50","cursor-not-allowed"),""+n){case"1":l.classList.add("pl-8");break;case"2":l.classList.add("pl-12");break;case"3":l.classList.add("pl-16");break;case"4":l.classList.add("pl-20")}return l.dataset.value=e,l.dataset.level=n,l.innerText=t,l.addEventListener("click",c),l}function i(){document.querySelectorAll("[data-atlantis-select]").forEach(e=>{e.classList.remove("border-sky-600")}),document.querySelectorAll("[data-atlantis-options]").forEach(e=>{e.classList.add("hidden")})}function c(){l.setAttribute("value",this.dataset.value),r.textContent=this.textContent,s.querySelectorAll("li").forEach(e=>{e===this?this.classList.add("bg-sky-600","text-white"):e.classList.remove("bg-sky-600","text-white")}),t(this.dataset.value)}return s.id="ul-"+n,s.classList.add("absolute","select-none","mt-1","hidden","bg-white","border-2","border-gray-200","rounded-lg","shadow-lg","max-h-[50vh]","overflow-y-auto","z-20"),s.setAttribute("data-atlantis-options",""),e.querySelectorAll("option").forEach(e=>{s.append(d({value:e.value,label:e.textContent,level:e.dataset.level,selected:e.selected,disabled:e.disabled})),e.selected&&(r.textContent=e.textContent,l.setAttribute("value",e.value))}),o.append(a,l,r,s),e.parentElement.replaceChild(o,e),{update:e=>{s.querySelectorAll("li").forEach(e=>{e.removeEventListener("click",c),e.remove()}),e.forEach(({value:e,label:t,level:n,selected:o,disabled:a})=>{s.append(d({value:e,label:t,level:n,selected:o,disabled:a})),o&&(r.textContent=t,l.setAttribute("value",e))})}}},window.addEventListener("load",()=>{var e;"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.min.js"),"http:"===window.location.protocol&&((e=document.getElementById("requireHTTPS")).querySelectorAll("a").forEach(e=>{e.href=window.location.href.replace("http://","https://")}),e.classList.remove("hidden")),document.head.querySelectorAll('link[rel="preload"]').forEach(e=>{e.setAttribute("rel","stylesheet")})});
Document.prototype.dialog=function({title:e="Dialog title",text:t="Dialog text",redirect:o=null,onclose:n=function(){}}){const r=document.createElement("dialog");var l=document.createElement("div"),a=document.createElement("button"),s=document.createElement("h2");s.textContent=e,s.classList.add("text-xl","font-semibold","mb-4","select-none","pr-4"),l.classList.add("overflow-auto"),l.innerHTML=t,a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /></svg>',a.classList.add("absolute","text-gray-400","hover:text-red-600","top-4","right-4","outline-none","transition","select-none"),a.addEventListener("click",()=>{if(o)return window.location.href=o;r.close(),n()},{once:!0}),r.classList.add("relative","p-8","rounded-xl","shadow","mx-4","bg-white","md:mx-auto","max-w-[90vw]"),r.append(s,l,a),document.body.append(r),r.showModal()},Document.prototype.sortable=function(r,{ondragend:t=function(){}}={}){let l;function o(e){e.preventDefault(),e.dataTransfer.dropEffect="move";var t,o,n=e.target.closest("li");n&&n!==l&&"LI"===n.nodeName&&(o=(t=e).target.getBoundingClientRect(),t={x:t.pageX-o.left,y:t.pageY-o.top},(e=>{e=e.getBoundingClientRect();return(e.bottom-e.top)/2})(e.target)<t.y?r.insertBefore(l,n.nextSibling):r.insertBefore(l,n))}function n(e){e.preventDefault(),l.classList.remove("opacity-50"),r.removeEventListener("dragover",o,!1),r.removeEventListener("dragend",n,!1),t(e)}[].slice.call(r.querySelectorAll("li")).forEach(function(e){e.draggable=!0}),r.addEventListener("dragstart",function(e){l=e.target.closest("li"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",l.textContent),r.addEventListener("dragover",o,!1),r.addEventListener("dragend",n,!1),setTimeout(function(){l.classList.add("opacity-50")},0)},!1)},Document.prototype.tags=function(e,t=5){const o={};return e.split(/[\s,]+/).forEach((e,t)=>{e=e.toLowerCase(),void 0===o[e]?o[e]=1:o[e]++}),Object.entries(o).length?Object.entries(o).sort((e,t)=>t[1]-e[1]).slice(0,t).map(e=>e[0]).join(", "):""},Document.prototype.progress=function(e=0,t=null){const o=document.createElement("div"),n=(o.classList.add("w-full","h-8","rounded-lg","bg-gray-200"),document.createElement("div"));return n.classList.add("h-8","rounded-lg","bg-sky-600","transition-all"),n.style.width=e+"%",o.append(n),t&&t.append(o),{element:o,update:e=>{n&&(n.style.width=e+"%")},destroy:()=>{o?.remove()}}},Document.prototype.upload=function(e,r,l=function(){},a="POST"){return new Promise((t,o)=>{const n=new XMLHttpRequest;n.open(a,e),n.upload.addEventListener("progress",e=>{e.lengthComputable&&(e=e.loaded/e.total*100,l(e))}),n.onload=()=>{var e=JSON.parse(n.response);(200===n.status?t:(document.dialog({text:e.message}),o))(e)},n.onerror=()=>{o(new Error("Network error"))},n.send(r)})},Document.prototype.select=function(t,o,n=function(){}){function e(e){document.querySelectorAll("[data-select]").forEach(e=>{e!==this&&e.classList.remove("border-sky-600")}),document.querySelectorAll("[data-options]:not(.hidden)").forEach(e=>{e!==o&&e.classList.add("hidden")}),this.classList.toggle("border-sky-600"),o.classList.toggle("hidden"),e.stopPropagation(),document.addEventListener("click",()=>{document.querySelectorAll("[data-select]").forEach(e=>{e.classList.remove("border-sky-600")}),document.querySelectorAll("[data-options]").forEach(e=>{e.classList.add("hidden")})},{once:!0})}function r(e){o.parentElement.querySelector("input").setAttribute("value",this.dataset.value),t.textContent=this.textContent,o.querySelectorAll("li").forEach(e=>{e.classList.remove("bg-sky-600","text-white")}),this.classList.add("bg-sky-600","text-white"),n(this.dataset.value)}return t.addEventListener("click",e),o.querySelectorAll("li").forEach(e=>{e.addEventListener("click",r)}),{update:e=>{console.log(o,t,e),o.querySelectorAll("li").forEach(e=>{e.removeEventListener("click",r)}),o.innerHTML=e,o.querySelectorAll("li").forEach(e=>{e.addEventListener("click",r)}),t.textContent="",t.parentElement.querySelector("input").setAttribute("value","")},destroy:()=>{t.removeEventListener("click",e),o.querySelectorAll("li").forEach(e=>{e.removeEventListener("click",r)})}}},window.addEventListener("load",()=>{var e;"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.min.js"),"http:"===window.location.protocol&&((e=document.getElementById("requireHTTPS")).querySelectorAll("a").forEach(e=>{e.href=window.location.href.replace("http://","https://")}),e.classList.remove("hidden")),document.head.querySelectorAll('link[rel="preload"]').forEach(e=>{e.setAttribute("rel","stylesheet")})});